{
  "lexicon": 1,
  "id": "org.chaoticharmonylabs.orbits.profile",
  "description": "Orbits platform user profile extending Bluesky actor profile",
  "defs": {
    "main": {
      "type": "record",
      "key": "literal:self",
      "record": {
        "type": "object",
        "required": ["createdAt"],
        "properties": {
          "displayName": {
            "type": "string",
            "maxLength": 64,
            "maxGraphemes": 64,
            "description": "Display name for Orbits platform"
          },
          "description": {
            "type": "string",
            "maxLength": 256,
            "maxGraphemes": 256,
            "description": "Profile bio/description"
          },
          "avatar": {
            "type": "blob",
            "accept": ["image/png", "image/jpeg"],
            "maxSize": 1000000,
            "description": "Profile avatar image"
          },
          "banner": {
            "type": "blob",
            "accept": ["image/png", "image/jpeg"],
            "maxSize": 1000000,
            "description": "Profile banner image"
          },
          "visibilitySettings": {
            "type": "ref",
            "ref": "#visibilitySettings",
            "description": "Controls what profile information is visible to different relationship types"
          },
          "orbitPreferences": {
            "type": "ref",
            "ref": "#orbitPreferences",
            "description": "User preferences for orbit interactions"
          },
          "onboarding": {
            "type": "ref",
            "ref": "#onboarding",
            "description": "Onboarding tutorial state and progress tracking"
          },
          "createdAt": {
            "type": "string",
            "format": "datetime"
          },
          "labels": {
            "type": "union",
            "refs": ["com.atproto.label.defs#selfLabels"]
          }
        }
      }
    },
    "visibilitySettings": {
      "type": "object",
      "description": "Defines what profile information is visible to different relationship types",
      "properties": {
        "publicVisibility": {
          "type": "ref",
          "ref": "#profileVisibility",
          "description": "What's visible to anyone (public orbits, follows, etc.)"
        },
        "friendVisibility": {
          "type": "ref",
          "ref": "#profileVisibility",
          "description": "What's visible to mutual friends"
        },
        "blockedVisibility": {
          "type": "ref",
          "ref": "#profileVisibility",
          "description": "What's visible to blocked users (usually minimal)"
        }
      }
    },
    "profileVisibility": {
      "type": "object",
      "description": "Specific visibility settings for profile elements",
      "properties": {
        "showDisplayName": {
          "type": "boolean",
          "default": true
        },
        "showDescription": {
          "type": "boolean",
          "default": true
        },
        "showAvatar": {
          "type": "boolean",
          "default": true
        },
        "showBanner": {
          "type": "boolean",
          "default": true
        },
        "showPublicOrbits": {
          "type": "boolean",
          "default": true,
          "description": "Show public orbits in profile"
        },
        "showPrivateOrbits": {
          "type": "boolean",
          "default": false,
          "description": "Show private orbits (only relevant for friends)"
        },
        "showOrbitCount": {
          "type": "boolean",
          "default": true,
          "description": "Show total orbit count"
        }
      }
    },
    "orbitPreferences": {
      "type": "object",
      "description": "User preferences for orbit functionality",
      "properties": {
        "allowFriendRequests": {
          "type": "boolean",
          "default": true,
          "description": "Allow others to send friend requests"
        },
        "allowOrbitInvites": {
          "type": "boolean",
          "default": true,
          "description": "Allow others to invite to orbits"
        },
        "defaultOrbitVisibility": {
          "type": "ref",
          "ref": "org.chaoticharmonylabs.orbits.defs#visibility",
          "description": "Default visibility for new orbits"
        },
        "autoAcceptFriends": {
          "type": "boolean",
          "default": false,
          "description": "Automatically accept friend requests"
        },
        "friendRequestNotifications": {
          "type": "boolean",
          "default": true,
          "description": "Receive notifications for friend requests"
        },
        "friendActivityNotifications": {
          "type": "boolean",
          "default": true,
          "description": "Receive notifications for friend activity"
        },
        "maxFriends": {
          "type": "integer",
          "default": 1000,
          "minimum": 10,
          "maximum": 5000,
          "description": "Maximum number of friends allowed"
        }
      }
    },
    "onboarding": {
      "type": "object",
      "description": "Onboarding tutorial state and progress tracking for user engagement",
      "properties": {
        "tutorialCompleted": {
          "type": "boolean",
          "default": false,
          "description": "Whether the user has completed the onboarding tutorial"
        },
        "tutorialVersion": {
          "type": "number",
          "description": "Version of the tutorial the user completed (for tracking updates and re-onboarding)"
        },
        "completedAt": {
          "type": "string",
          "format": "datetime",
          "description": "Timestamp when the tutorial was completed"
        },
        "lastStartedAt": {
          "type": "string",
          "format": "datetime",
          "description": "Timestamp when the user last started the tutorial (for analytics and re-engagement)"
        }
      }
    }
  }
}
